import{s as R,u as T,x as S,C as F,r as y,a as p,d as a,w as r,b as o,t as c,y as P,k as j,o as l,e as u,l as m,f as i,F as E,j as q,B as L,D as H,W as O,I as Q,L as W,N as J,O as K,P as M,H as X,Q as Y,R as Z,p as $,h as ee}from"./index-04e45f01.js";/* empty css               *//* empty css            */import{_ as te}from"./error-5dbb389c.js";/* empty css                    */import{f as oe}from"./formatDate-75ce7776.js";/* empty css                        */import{_ as se}from"./_plugin-vue_export-helper-c27b6911.js";const re=function(){let t=0;return function(n,k){clearTimeout(t),t=setTimeout(n,k)}}(),ne={computed:{ArrowRight(){return R}},data(){return{category_state:!0,keyword:"",data:[],count:0,page_size:7,page:1,sort:"0",sort_sc:"1",category_form:{},form:{price:[],sort:"0-0"},category:[]}},watch:{"form.price":{handler(t,n){this.delayGetAccount()},deep:!0},keyword:{handler(t,n){this.delayGetAccount()},deep:!0}},created(){document.title="搜索 - 游戏列表 - "+this.$config.site_name},mounted(){const t=T();if(!t.query.keyword){this.ErrorGame();return}this.keyword=t.query.keyword,this.delayGetAccount()},methods:{delayGetAccount:function(){re(()=>{this.getAccount()},800)},initData:function(){this.sort="0",this.sort_sc="1",this.form={price:[],sort:"0-0"},this.category_form={}},sortUpdateInit:function(){this.form.sort=this.sort+"-1",this.sort_sc="1",this.delayGetAccount()},sortUpdate:function(){let t=this;t.sort_sc=="0"?t.sort_sc="1":t.sort_sc="0",setTimeout(function(){t.form.sort=t.sort+"-"+t.sort_sc,t.delayGetAccount()},100)},formatDate:function(t){return oe(t,"yyyy-m-d")},ErrorGame(t){return this.$message.error(t||"参数有误！"),S.push({path:"/game"})},getAccount(){this.form.keyword=this.keyword,this.form.page=this.page,this.form.limit=this.page_size,this.form.sort=this.sort+"-"+this.sort_sc,this.$http.post("/api/account/list_not",this.form).then(t=>{this.loading=!1,t.data.code===0?(this.data=F.decrypt(t.data.data),this.count=t.data.count):this.$message.error(t.data.msg)}).catch(t=>{this.loading=!1,this.$message.error(t.message)})}}},_=t=>($("data-v-1806cb37"),t=t(),ee(),t),ae={class:"content game_list"},le={class:"card-header"},ie=_(()=>o("span",null,"搜索条件",-1)),ce={key:0,class:"con-pages-fl amg-category"},me=_(()=>o("span",{class:"text-gray-500"},"-",-1)),de={key:1,style:{"text-align":"center"}},_e=_(()=>o("span",null,"时间",-1)),ue=_(()=>o("span",null,"金额",-1)),pe={class:"initData"},ge={class:"game-list-header"},fe={class:"amg-game-list",style:{"border-bottom":"none"}},he={class:"amg-game-des"},ye={class:"amg-game-des-img"},ke=["src"],be={class:"amg-game-des-info"},ve={class:"amg-game-des-info-top"},we={class:"amg-game-des-info-top-content"},Ce=_(()=>o("div",{class:"amg-game-des-info-top-content-title"},"详情",-1)),xe={class:"amg-game-des-info-top-content-detail"},Ve={class:"amg-game-des-info-tips"},Ee={class:"amg-game-des-price"},Ie=_(()=>o("div",{style:{"border-bottom":"1px solid #e2e2e2"}},null,-1)),Ae=_(()=>o("img",{style:{width:"100%","min-height":"100px"},src:te,alt:""},null,-1));function Be(t,n,k,Ue,e,d){const g=L,I=P,f=H,A=O,b=Q,v=W,B=J,h=j,w=y("CaretTop"),C=y("CaretBottom"),x=K,V=M,U=X,G=y("router-link"),z=Y,D=Z;return l(),p("div",ae,[a(I,{"separator-icon":d.ArrowRight,class:"orzice-breadcrumb"},{default:r(()=>[a(g,{to:"/"},{default:r(()=>[u("首页")]),_:1}),a(g,{to:"/game"},{default:r(()=>[u("全部游戏")]),_:1}),a(g,null,{default:r(()=>[u("搜索【"+c(e.keyword)+"】结果",1)]),_:1})]),_:1},8,["separator-icon"]),a(h,{class:"box-card",shadow:"always"},{header:r(()=>[o("div",le,[ie,e.category_state?i("",!0):(l(),m(f,{key:0,class:"button",type:"success",onClick:n[0]||(n[0]=s=>e.category_state=!0)},{default:r(()=>[u("展开")]),_:1})),e.category_state?(l(),m(f,{key:1,class:"button",type:"danger",onClick:n[1]||(n[1]=s=>e.category_state=!1)},{default:r(()=>[u("折叠")]),_:1})):i("",!0)])]),default:r(()=>[e.category_state?(l(),p("div",ce,[a(B,{model:e.category_form,"label-width":"100px"},{default:r(()=>[a(b,{style:{"margin-bottom":"15px"},label:"搜索关键字"},{default:r(()=>[a(A,{modelValue:e.keyword,"onUpdate:modelValue":n[2]||(n[2]=s=>e.keyword=s)},null,8,["modelValue"])]),_:1}),a(b,{style:{"margin-bottom":"15px"},label:"价格区间"},{default:r(()=>[a(v,{modelValue:e.form.price[0],"onUpdate:modelValue":n[3]||(n[3]=s=>e.form.price[0]=s),min:0,max:e.form.price[1]==""||e.form.price[1]==0||e.form.price[1]==null?9999999:e.form.price[1],"controls-position":"right",controls:!1},null,8,["modelValue","max"]),me,a(v,{modelValue:e.form.price[1],"onUpdate:modelValue":n[4]||(n[4]=s=>e.form.price[1]=s),min:e.form.price[0]==""||e.form.price[0]==0||e.form.price[0]==null?0:e.form.price[0],max:9999999,"controls-position":"right",controls:!1},null,8,["modelValue","min"])]),_:1})]),_:1},8,["model"])])):i("",!0),e.category_state?i("",!0):(l(),p("div",de,"查询条件已折叠"))]),_:1}),a(h,{style:{"margin-top":"15px"},class:"box-card",shadow:"always"},{default:r(()=>[a(U,{onChange:d.sortUpdateInit,modelValue:e.sort,"onUpdate:modelValue":n[5]||(n[5]=s=>e.sort=s)},{default:r(()=>[a(V,{label:"0"},{default:r(()=>[_e,e.sort=="0"?(l(),m(x,{key:0,onClick:d.sortUpdate},{default:r(()=>[e.form.sort=="0-0"?(l(),m(w,{key:0})):i("",!0),e.form.sort=="0-1"?(l(),m(C,{key:1})):i("",!0)]),_:1},8,["onClick"])):i("",!0)]),_:1}),a(V,{label:"1"},{default:r(()=>[ue,e.sort=="1"?(l(),m(x,{key:0,onClick:d.sortUpdate},{default:r(()=>[e.form.sort=="1-0"?(l(),m(w,{key:0})):i("",!0),e.form.sort=="1-1"?(l(),m(C,{key:1})):i("",!0)]),_:1},8,["onClick"])):i("",!0)]),_:1})]),_:1},8,["onChange","modelValue"]),o("div",pe,[a(f,{type:"primary",onClick:d.initData},{default:r(()=>[u("重置搜索")]),_:1},8,["onClick"])])]),_:1}),o("div",ge,[o("span",null,"搜索【"+c(e.keyword)+"】结果",1)]),a(h,{class:"box-card",shadow:"always"},{default:r(()=>[o("div",fe,[(l(!0),p(E,null,q(e.data,(s,N)=>(l(),p(E,{key:N},[a(G,{class:"data-list",to:"/game/info?id="+s.id},{default:r(()=>[o("div",he,[o("div",ye,[o("img",{src:s.pcIcon,alt:""},null,8,ke)]),o("div",be,[o("div",ve,[o("div",null,[o("span",null,c(s.name),1),o("div",we,[Ce,o("div",xe,c(s.name),1)])])]),o("div",Ve,[o("span",null,"游戏: "+c(s.game_info.name),1),o("span",null,"大区: "+c(s.region),1),o("span",null,"服务器: "+c(s.server),1),o("span",null,"更新时间: "+c(d.formatDate(s.updated_time)),1)])]),o("div",Ee," ¥"+c(s.price),1)])]),_:2},1032,["to"]),Ie],64))),128)),e.data.length==0?(l(),m(z,{key:0,description:"这个星球没有数据"},{image:r(()=>[Ae]),_:1})):i("",!0),a(D,{align:"center",onCurrentChange:d.getAccount,background:"",layout:"total, prev, pager, next, jumper","page-size":e.page_size,"onUpdate:pageSize":n[6]||(n[6]=s=>e.page_size=s),"current-page":e.page,"onUpdate:currentPage":n[7]||(n[7]=s=>e.page=s),total:e.count},null,8,["onCurrentChange","page-size","current-page","total"])])]),_:1})])}const Pe=se(ne,[["render",Be],["__scopeId","data-v-1806cb37"]]);export{Pe as default};
